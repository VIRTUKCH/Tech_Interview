# Policy(정책)

## 1. DB 에서 말하는 정책
DB 에서 '정책'은 일반적으로 특정 규칙이나 지침을 저장하는 역할을 한다.
정책 테이블은 다음과 같은 정보를 저장할 수 있다.

- 정책 ID: 각 정책을 고유하게 식별하는 키.
- 정책 이름: 정책의 이름이나 제목.
- 정책 내용: 정책의 구체적인 내용이나 설명.
- 생성일 및 수정일: 정책이 생성되거나 수정된 날짜.
- 적용 범위: 이 정책이 적용되는 대상(예: 특정 부서, 사용자 그룹 등).

예를 들어, 온라인 서점에서 환불과 관련된 것들을 미리 '환불정책' 테이블에 저장할 수 있고, 그에 따라 환불을 진행할 수 있다.

## 2. 정책 테이블이 필요한 경우
정책 테이블은 DB에 저장되는 값이 특정 형태를 벗어나지 않게 해준다.

예를 들어 어떤 사용자가 환불을 진행할 때, 환불 사유와 같은 것을 직접 입력하는 것이 아니라 환불 정책 테이블에서 값을 가져오는 형태라면,

개발자가 원하는 상황에만 국한될 수 있도록 만들 수 있다. 이를 통해 데이터의 일관성을 유지하고, 사용자 입력으로 인한 오류를 최소화할 수 있다.

아래 예시를 보자.

### 2-1. 환불 정책 테이블 생성 DDL
```mysql
CREATE TABLE refund_policy (
    policy_id INT PRIMARY KEY AUTO_INCREMENT,
    policy_name VARCHAR(255) NOT NULL,
    policy_description TEXT,
    refund_shipping_fee BIGINT DEFAULT 0 -- 환불 시 배송비 (정수형)
);
```

### 2-2. 환불 정책 데이터 삽입 DDL
```mysql
INSERT INTO refund_policy (policy_name, policy_description, refund_shipping_fee) VALUES
('제품 결함으로 인한 환불', '제품이 결함이 있는 경우 환불 가능', 0), -- 결함으로 인한 환불은 배송비 무료
('배송 지연으로 인한 환불', '배송이 7일 이상 지연된 경우 환불 가능', 5000), -- 배송비 5000원
('단순 변심 환불', '구매 후 30일 이내 변심으로 환불 가능', 3000); -- 변심으로 인한 환불 시 배송비 3000원
```

### 2-3. 환불 요청 테이블 생성 DDL
```mysql
CREATE TABLE refund_requests (
    request_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL, -- 환불 요청한 사용자 ID
    policy_id INT NOT NULL, -- 선택된 환불 정책 ID
    request_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (policy_id) REFERENCES refund_policy(policy_id)
);
```

위와 같이 환불이 진행될 때 사용자로 하여금 환불 사유에 따라 부담해야 하는 배송비를 미리 알려 주거나 하는 기능을 만들어 줄 수 있다.

## 3. 정책 테이블을 사용하지 않으려면
위와 같은 기능이 꼭 DB 의 별도 테이블을 이용해서 만들어져야 하는 것은 아니다.

1. DB 에서 값을 불러오지 않을 수도 있고

> 이 경우에는 프론트 엔드에서 하드코딩을 통해 구현해야 한다. 단, 코드의 변경 없이(개발 버전의 변경 없이)는 값을 변경할 수 없다. 만약 DB 를 사용한다면, insert 문을 통해 수정할 수 있다.

2. 정규화 없이 별도의 테이블을 사용하지 않을 수도 있다.

> 이 경우에는 중복된 값이 반복해서 들어가게 될 수 있다. DB 의 용량 면에서 좋지 못한 성능을 보일 수 있다.

## 4. 결론

정책 테이블은 공식적인 단어는 아니다. 그러나, 서비스에 따라 정책 테이블을 별도로 만들어 두는 것이 데이터베이스 관리 차원에서 도움이 될 수 있다.

반면, 정책 테이블을 사용하지 않더라도 상황에 따라 유연하게 운영할 수 있는 방법이 있으므로, 각 조직의 필요에 따라 적절한 선택을 하는 것이 중요하다.

정책 테이블의 필요성과 사용 여부는 조직의 규모, 운영 방식, 관리하고자 하는 데이터의 복잡성에 따라 달라질 수 있으며, 각 경우에 맞는 최적의 솔루션을 찾는 것이 중요하다.