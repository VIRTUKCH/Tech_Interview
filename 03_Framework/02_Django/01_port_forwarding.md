# Port Forwarding

## 1. 포트 포워딩이란?
포트 포워딩(Port Forwarding)은 네트워크에서 특정 포트로 들어오는 트래픽을 다른 포트나 IP 주소로 전달하는 기술이다. 주로 라우터나 방화벽에서 사용되며, 외부의 요청이 내부 네트워크의 특정 장치나 서비스로 전달될 수 있도록 설정한다. 예를 들어, 웹 서버나 게임 서버와 같은 서비스에 외부에서 접근할 수 있도록 할 때 사용된다

간단히 말해, 포트 포워딩은 공유기의 공인 IP 주소를 사용하고, 해당 IP의 특정 포트 번호로 들어오는 트래픽을 내부 네트워크의 특정 장치로 전달하는 방식이다.

예를 들어, 어떤 공유기의 WiFi 에 속해있는, 하나의 서버를 담당하는 디바이스가 있다고 가정하자. 포트 포워딩을 설정하지 않으면, 외부 네트워크에서 내부 네트워크의 장치에 직접 접근할 수 없다. 즉, 같은 Wi-Fi 네트워크에 연결된 장치만 서버에 접근할 수 있다.

그에 따라서, 내가 만든 웹 페이지를 다른 사람에게 보여주고 싶은 경우에는 같은 와이파이를 사용하지 않는다면 꼭 포트포워딩을 해야 한다.

## 2. 외부 IP 와 내부 IP

### 2-1. 외부 IP
외부 IP 주소는 인터넷 서비스 제공업체(ISP) 에서 할당 받는 공인 IP 주소이다. 이 주소는 인터넷에 연결된 모든 장치가 사용하는 주소로, 외부 네트워크에서 장치를 식별하는 데 사용된다.

외부 IP 는 다른 네트워크와의 통신을 가능하게 하며, 인터넷에서 접근할 수 있는 주소이다. 일반적으로 공유기나 라우터에 할당되며, 여러 대의 내부 장치가 공유하여 사용할 수 있다.

### 2-2. 내부 IP
내부 IP 주소는 로컬 네트워크 내에서 사용되는 사설 IP 주소이다. 일반적으로 192.168.x.x, 10.x.x.x. 172.16.x.x 와 같은 형식을 가진다.

내부 IP 는 인터넷에서 직접 접근할 수 없으며, 주로 공유기나 라우터를 통해 관리된다. 내부 네트워크의 장치들 간의 통신을 가능하게 하며, 여러 대의 장치가 동일한 외부 IP 주소를 공유할 수 있도록 한다.

내부 IP 주소를 사용하여 로컬 네트워크의 장치들 간에 통신할 수 있지만, 외부에서 접근하려면 포트 포워딩을 통해 해당 요청을 내부 IP 로 전달해야 한다.

## 3. Windows 에서 방화벽 설정하기 (AI 검색 결과)
Windows 방화벽에서 포트 포워딩을 설정하기 위해서는 인바운드 규칙을 추가해야 합니다. 다음은 Windows에서 방화벽 설정을 하는 단계입니다:

1. Windows 키를 누르고, 방화벽 상태 확인으로 들어간다.

2. 좌측의 [고급 설정]을 누른다.

3. 좌측의 [인바운드 규칙]을 누르고, 우측에 [새 규칙..] 을 누른다.

4. [포트] 를 누르고 [다음] 을 누른다.

5. [TCP] 와 [특정 로컬 포트] 를 누른다. 포트를 입력하려면 입력한다. (나는 8000 을 입력했다)

6. [연결 허용] 을 누른다.

7. 규칙은 도메인, 개인, 공용 모두 체크했다.

8. 이름과 설명을 입력하고 [마침] 을 누른다.

## 4. 인바운드 규칙과 아웃바운드 규칙
인바운드 규칙은 외부에서 내부 네트워크로 들어오는 트래픽을 제어하는 규칙이다. 기본적으로 방화벽은 모든 외부 장치를 막지만, 인바운드 규칙을 사용해서 특정 외부 장치나 트래픽을 허용할 수 있다.

이 규칙은 서버나 서비스가 외부에서 접근 가능하도록 설정할 때 사용되며, 예를 들어 웹 서버, 데이터베이스 서버, 원격 데스크톱 서비스 등을 필요한 설정이다. 인바운드 규칙을 통해 보안을 강화하면서도 필요한 서비스에 대한 접근을 가능하게 할 수 있다.

아웃바운드 규칙은 내부 네트워크에서 외부로 나가는 트래픽을 제어하는 설정이다. 이 규칙은 내부 장치가 외부 서버나 서비스에 연결할 수 있는지를 결정한다. 일반적으로 아웃바운드 규칙은 별도로 설정할 필요가 없지만, 특정 보안 요구 사항이나 네트워크 관리 정책에 따라 설정할 수 있다.

예를 들어, 특정 응용 프로그램의 인터넷 접근을 제한하거나, 특정 IP 주소로의 연결을 차단하는 등의 용도로 사용될 수 있다.

## 5. 오류 해결

### 5-1. 방화벽 설정
방화벽 설정을 잘했는지 꼼꼼하게 보자.

### 5-2. settings.py 파일에서 ALLOWED_HOSTS 설정
settings.py 파일에서 이렇게 설정해 줘야 한다.
```python
ALLOWED_HOSTS = ['*']
```

### 5-3. WSL 을 사용하면 내부 IP 주소가 달라질 수 있다
WSL(Windows Subsystem for Linux) 은 리눅스 환경을 Windows 와 분리된 가상 네트워크에서 실행한다. 이로 인해 WSL 은 자체적으로 관리되는 가상 네트워크 인터페이스를 사용하게 된다. (이 내부 아이피는 누가 할당해 줄까..?)

WSL 은 이 가상 네트워크 인터페이스에서 특정 IP 주소를 할당 받는다. 그리고 이 IP 주소는 172.x.x.x 혹은 192.168.x.x 와 같은 형태이다. WSL 의 리눅스 환경이 Windows 의 네트워크 설정과는 별개로 관리되기 때문이다.

WSL 은 자체 리눅스 네트워크 스택을 사용하기 때문에, WSL 에서 실행되는 서비스는 Windows 의 IP 주소와는 다른 IP 주소를 가지게 된다. 독립적으로 작동하기 때문에, WSL 에서 실행되는 서버에 접근할 때는 WSL 의 IP 주소를 사용해야 한다.

추가적으로, WSL 은 네트워크에 연결될 때 DHCP 서버로부터 IP 주소를 할당받는다. 그에 따라 WSL 재시작이나 네트워크의 상태에 따라 변경될 수 있다.