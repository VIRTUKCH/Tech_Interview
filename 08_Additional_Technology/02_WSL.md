# WSL (Windows Subsystem for Linux)

## WSL 이란?
WSL(Windows Subsystem for Linux)은 Microsoft에서 제공하는 기능으로, Windows 운영체제 내에서 Linux 환경을 네이티브하게 실행할 수 있도록 지원한다. 이 기능은 Windows와 Linux 사이의 경계를 허물어, 개발자들이 Linux 전용 도구와 애플리케이션을 Windows 환경에서 사용할 수 있게 한다.

## Linux 환경을 굳이 갖추어야 하는 이유는 무엇일까?
많은 개발자들이 Mac OS를 선호하는 이유 중 하나는, Mac OS가 Unix 기반으로 설계되어 터미널 사용과 bash 쉘 환경이 우수하기 때문이다. Linux 또한 Unix 계열로서, 서버 관리, 자동화 스크립트 작성 및 다양한 개발 도구 사용에 적합하다. 특히, Windows 환경에서 Linux 기반 서버나 클라우드 환경과의 호환성을 유지하기 위해 Linux 환경을 갖추는 것이 중요하다.

## Windows 환경에서는 그런 것들이 안 될까?
Windows는 기본적으로 PowerShell이나 CMD와 같은 쉘을 제공하지만, 이들 쉘은 Linux의 bash와 같은 오픈소스 환경 및 다양한 자동화 도구 지원 측면에서 차이가 있다. Windows의 기본 쉘은 Windows 환경에 최적화되어 있으므로, Linux 환경에서 제공하는 풍부한 개발 도구와 서버 운영 관련 기능을 그대로 활용하기 어렵다. 이러한 이유로 Linux 환경이 필요한 상황에서는 WSL이 매우 유용하다.

## 왜 서버 컴퓨터는 거의 다 Linux 환경일까? (Windows 환경의 서버는 어떤 것이 안 좋을까)
서버 환경에서는 안정성, 보안성, 확장성, 그리고 비용 효율성이 매우 중요하다. Linux는 오픈 소스 기반으로 라이선스 비용 부담이 적고, 높은 안정성과 보안성을 제공하며, 다양한 서버용 애플리케이션과 최적화된 패키지 관리 시스템을 갖추고 있다. 반면, Windows 서버는 라이선스 비용, 자원 소모, 그리고 특정 애플리케이션에 종속되는 경향이 있어 대규모 서버 운영에는 다소 불리할 수 있다.

## Shell 의 종류
- **Bash (Bourne Again SHell):** 가장 널리 사용되는 Shell로 다양한 스크립트와 명령어를 지원한다.
- **Zsh (Z Shell):** Bash보다 확장성이 뛰어나며, 사용자 정의가 용이하여 많은 개발자들이 선호한다.
- **Fish (Friendly Interactive Shell):** 직관적인 인터페이스와 강력한 자동완성 기능을 제공하여 초보자에게도 적합하다.

## WSL 만이 가지는 장점 및 특징
### VM 보다 리소스가 덜 소비된다.
기존에 가상 머신(VM)을 사용하여 Linux 환경을 구동하던 방식과 달리, WSL은 가벼운 호환 계층을 제공하여 자원 사용량을 줄인다. 특히 WSL 2는 실제 Linux 커널을 포함하여, 기존 버전보다 더 높은 성능과 호환성을 제공한다.

### 그 외 장점
- **개발 환경의 통합:** Windows와 Linux의 도구들을 한 환경에서 동시에 사용할 수 있으므로, 예를 들어 Java와 Spring 기반의 개발 환경에서 Python이나 Django를 비롯한 Linux 전용 도구들을 병행하여 사용할 수 있다.
- **빠른 시작 및 쉬운 설치:** 복잡한 가상화 환경 구성 없이 Windows 스토어를 통해 손쉽게 Linux 배포판을 설치할 수 있다.
- **개발자 커뮤니티 지원:** 다양한 오픈 소스 도구와 활발한 커뮤니티 덕분에 문제 해결이나 업데이트에 대한 지원을 빠르게 받을 수 있다.
- **배포 및 자동화:** Linux 환경에서 제공하는 자동화 도구와 스크립트를 활용하여, 개발 및 배포 파이프라인을 보다 효율적으로 관리할 수 있다.

## 기존의 Windows 폴더는 다 어디로 가는 걸까
Windows의 파일 시스템은 /mnt/c, /mnt/d 등의 경로로 마운트된다. 따라서 WSL 내에서 Windows 파일을 직접 접근하고 수정할 수 있다.

## 가상화와는 어떤 것들이 다를까
WSL 2는 기존의 WSL 1과 달리, 경량 가상 머신을 사용하여 실제 Linux 커널을 실행한다. 하지만 일반적인 가상화와는 다르게 Windows와의 파일 시스템 통합이 원활하며, 리소스 사용량이 낮고 성능이 뛰어나다.

## 커널은 어디서 가져오는 걸까
WSL 2는 Microsoft에서 제공하는 실제 Linux 커널을 사용하며, Windows 업데이트를 통해 자동으로 최신 버전이 유지된다.

## WSL 만 깔끔하게 삭제할 수 있을까?
가능하다. Windows에서 wsl --unregister <배포판이름> 명령어를 실행하면 특정 Linux 배포판을 제거할 수 있으며, Windows 기능 관리에서 WSL을 비활성화하면 전체 WSL을 삭제할 수 있다.

## 동작 원리의 핵심이 뭘까
WSL의 핵심은 Windows와 Linux의 커널 간의 호환 계층을 제공하는 것이다. WSL 1은 시스템 콜 변환 계층을 통해 Linux 바이너리를 실행했으며, WSL 2는 실제 Linux 커널을 실행하여 호환성을 대폭 개선했다.

## WSL 내에서 사용되는 특별한 디렉터리
- /mnt/c, /mnt/d 등 → Windows 파일 시스템과 연결되는 디렉터리
- /home → 사용자 계정이 있는 기본 디렉터리
- /var → 로그 파일, 캐시, 패키지 데이터 저장
- /etc → 시스템 설정 파일들
- /usr → 기본적인 유틸리티, 실행 파일 저장
- /opt → 서드파티 애플리케이션 설치

## /mnt/c 를 통해 C 드라이브로 간다면, Linux 위에 Windows 가 있는 걸까?
아니다. WSL은 Windows 내에서 실행되는 가상화된 Linux 환경이고, /는 그 WSL 내부의 루트 디렉터리다. 즉, WSL 내부에서만 독립적으로 동작하는 가상 Linux 파일 시스템이지, Windows 위에 Linux를 직접 설치하는 건 아니다.

- /mnt → Windows 파일 시스템과 연결되는 마운트 포인트
- /mnt/c → Windows의 C:\ 드라이브와 연결됨.
- /mnt/d → Windows의 D:\ 드라이브와 연결됨.
즉, WSL 내에서 /mnt/c로 이동하면 Windows의 C:\ 드라이브에 접근 가능.

## 그럼 /는 Windows 파일 시스템과 어떻게 연결될까?
WSL의 루트 (/)는 가상화된 Linux 파일 시스템

- Windows와 완전히 독립적인 환경.
- 기본적으로 ext4.vhdx라는 가상 디스크에 저장됨.
- Windows 파일 탐색기에서 \\wsl$을 입력하면 WSL 파일 시스템에 접근 가능.
- Windows 파일 시스템은 /mnt/c, /mnt/d 등에 마운트됨
- WSL에서 Windows 파일을 읽고 쓰는 건 가능하지만, 권한 체계가 다르므로 일부 동작이 다를 수 있음.

다시 말해서, WSL 내에서 Windows 를 접근할 수도 있지만, 참조 형식이라고 생각하면 된다.

## 마운트란?
마운트(Mount)는 특정 파일 시스템을 현재 운영 체제의 디렉터리 트리에 연결하는 과정을 의미한다. 즉, 외부 저장 장치(USB, 하드 드라이브, 네트워크 드라이브 등)나 다른 파일 시스템을 기존 디렉터리 구조 내에서 접근할 수 있도록 연결하는 것이다.

쉽게 설명하면,  Windows에서는 드라이브를 C:\, D:\처럼 따로 관리하지만, Linux에서는 특정 디렉터리에 다른 저장소를 "마운트" 해서 하나의 디렉터리 구조로 포함시킨다.

WSL에서 Windows 파일 시스템을 /mnt/c에 마운트하면, WSL 환경에서 /mnt/c/Users/ 경로를 통해 Windows C:\Users\ 폴더에 접근할 수 있다. 반대로, Windows에서 WSL의 파일을 접근할 때는 \\wsl$\Ubuntu\home\ 같은 네트워크 경로를 통해 접근할 수 있다.

## WSL은 Windows 위에서 돌아가지만, /는 Windows와 독립적인 Linux 파일 시스템을 갖고 있음.
WSL2의 경우, ext4.vhdx라는 가상 디스크 파일을 사용해서 Linux의 / 파일 시스템을 관리함.
즉, Windows에서 WSL의 /는 독립적인 공간이며, Windows의 C:\, D:\와는 별개로 동작함.
다만, /mnt/c, /mnt/d처럼 마운트를 통해 Windows 파일 시스템을 WSL에서 사용할 수 있음.
👉 즉, WSL은 Windows와 연결되어 있지만, /는 독립적인 Linux 파일 시스템을 유지하고 있음! 🚀

## Linux 가 아니라 Windows 에 설치된 프로그램을 가져오는 것도 가능할까?
가능하다. 

## Linux 버전의 컴파일러 같은 것들을 install 해도 될까?
- WSL에서는 Linux 패키지 매니저(apt, yum, dnf 등)를 이용해 컴파일러를 설치할 수 있음.
- 예: sudo apt install gcc 하면 Linux에서 GCC 컴파일러 사용 가능.
- 하지만 Windows의 실행 파일(.exe)과 WSL의 바이너리는 다르므로, 크로스 컴파일이 필요한 경우가 있을 수 있음.
- → "Linux용 컴파일러를 설치하고 실행할 수 있지만, Windows 바이너리와는 다를 수 있으므로 크로스 컴파일이 필요할 수도 있다."